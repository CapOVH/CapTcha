<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Dashboard â€“ CapTcha Tool</title>

  <!-- Tailwind + Alpine -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>

  <!-- Feather Icons -->
  <script src="https://unpkg.com/feather-icons"></script>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>

  <style>
    body { font-family: 'Inter', sans-serif; }
    .glass { @apply bg-white/10 backdrop-blur-xl border border-white/20; }
    .dark .glass { @apply bg-gray-800/60 border-gray-700/50; }
    .badge-phoenix-success { @apply bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200; }
    .badge-phoenix-danger { @apply bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200; }
    .navbar-vertical { @apply fixed inset-y-0 left-0 w-64 bg-white/10 backdrop-blur-xl border-r border-white/20 transition-transform duration-300; }
    .dark .navbar-vertical { @apply bg-gray-800/80 border-gray-700; }
    .navbar-vertical.collapsed { @apply -translate-x-full; }
    .icon-wrapper-sm { @apply w-12 h-12 rounded-full bg-gradient-to-br flex items-center justify-center text-white shadow-lg; }
    .shadow-primary-100 { @apply shadow-indigo-500/20; }
    .shadow-info-100 { @apply shadow-blue-500/20; }
  </style>
</head>
<body class="bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100" x-data="dashboard()" x-init="feather.replace(); initAuth()">

<!-- Sidebar -->
<div class="navbar-vertical glass z-50" :class="{ 'collapsed': collapsed }">
  <div class="p-6">
    <div class="flex items-center justify-between mb-8">
      <a href="index.html" class="flex items-center space-x-2">
        <div class="w-10 h-10 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center text-white font-bold">CT</div>
        <span class="text-xl font-bold">CapTcha Tool</span>
      </a>
      <button @click="collapsed = !collapsed" class="lg:hidden">
        <i data-feather="x" class="w-6 h-6"></i>
      </button>
    </div>

    <nav class="space-y-1">
      <a href="dashboard.html" class="flex items-center space-x-3 p-3 rounded-lg bg-white/20 dark:bg-gray-700/50">
        <i data-feather="airplay" class="w-5 h-5"></i>
        <span>Dashboard</span>
        <span class="ml-auto badge bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200 text-xs">new</span>
      </a>

      <a href="#" class="flex items-center space-x-3 p-3 rounded-lg hover:bg-white/10 dark:hover:bg-gray-700/30">
        <i data-feather="save" class="w-5 h-5"></i>
        <span>Configs</span>
      </a>

      <a href="#" class="flex items-center space-x-3 p-3 rounded-lg hover:bg-white/10 dark:hover:bg-gray-700/30">
        <i data-feather="code" class="w-5 h-5"></i>
        <span>Scripts</span>
      </a>

      <div x-data="{ open: true }">
        <button @click="open = !open" class="w-full flex items-center justify-between p-3 rounded-lg hover:bg-white/10 dark:hover:bg-gray-700/30">
          <div class="flex items-center space-x-3">
            <i data-feather="key" class="w-5 h-5"></i>
            <span>Your Keys</span>
          </div>
          <i :class="open ? 'rotate-90' : ''" data-feather="chevron-right" class="w-4 h-4 transition-transform"></i>
        </button>
        <div x-show="open" x-collapse class="pl-8 space-y-1">
          <a href="#" class="block p-2 text-sm hover:text-indigo-400">View Keys</a>
        </div>
      </div>

      <hr class="my-4 border-white/20">

      <a href="#" class="flex items-center space-x-3 p-3 rounded-lg hover:bg-white/10 dark:hover:bg-gray-700/30">
        <i data-feather="file-text" class="w-5 h-5"></i>
        <span>Documentation</span>
        <span class="ml-auto badge bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200 text-xs">new</span>
      </a>

      <a href="https://discord.gg/crackv" target="_blank" class="flex items-center space-x-3 p-3 rounded-lg hover:bg-white/10 dark:hover:bg-gray-700/30">
        <i class="fab fa-discord w-5 h-5"></i>
        <span>Discord</span>
      </a>
    </nav>

    <div class="mt-8">
      <button @click="collapsed = !collapsed" class="w-full flex items-center justify-center space-x-2 p-3 rounded-lg hover:bg-white/10 dark:hover:bg-gray-700/30 text-sm">
        <i data-feather="arrow-left-to-line" class="w-5 h-5"></i>
        <span>Collapse</span>
      </button>
    </div>
  </div>
</div>

<!-- Main Content -->
<main class="lg:ml-64 min-h-screen pt-20 px-4 pb-20" :class="{ 'lg:ml-20': collapsed }">
  <div class="max-w-7xl mx-auto">

    <!-- Header -->
    <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between mb-8">
      <div>
        <h1 class="text-3xl font-bold">Your Dashboard</h1>
        <p class="text-gray-600 dark:text-gray-400">Welcome back, <span x-text="user?.email?.split('@')[0] || 'User'"></span>!</p>
      </div>
      <div class="flex items-center space-x-3 mt-4 sm:mt-0">
        <button @click="openRedeemModal = true" class="px-4 py-2 bg-gradient-to-r from-indigo-500 to-purple-600 text-white rounded-lg hover:shadow-lg transition">
          Redeem Key
        </button>
        <button @click="copyInjectCode" class="px-4 py-2 border border-indigo-500 text-indigo-500 rounded-lg hover:bg-indigo-50 dark:hover:bg-indigo-900/20 transition">
          Copy Inject Code
        </button>
        <button @click="logout()" class="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition">
          Logout
        </button>
      </div>
    </div>

    <!-- Stats -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
      <!-- Personal Injections -->
      <div class="glass p-6 rounded-2xl">
        <div class="flex items-center justify-between">
          <div class="flex items-center space-x-3">
            <div class="icon-wrapper-sm from-indigo-500 to-purple-600 shadow-primary-100" style="transform: rotate(-7.45deg);">
              <i data-feather="arrow-up" class="w-6 h-6"></i>
            </div>
            <div>
              <p class="text-sm text-gray-600 dark:text-gray-400">Your Injections</p>
              <p class="text-2xl font-bold text-indigo-600 dark:text-indigo-400" x-text="stats.personal"></p>
            </div>
          </div>
          <span class="text-xs text-gray-500">Total</span>
        </div>
      </div>

      <!-- Global Injections -->
      <div class="glass p-6 rounded-2xl">
        <div class="flex items-center justify-between">
          <div class="flex items-center space-x-3">
            <div class="icon-wrapper-sm from-blue-500 to-cyan-500 shadow-info-100" style="transform: rotate(-7.45deg);">
              <i data-feather="globe" class="w-6 h-6"></i>
            </div>
            <div>
              <p class="text-sm text-gray-600 dark:text-gray-400">Global Injections</p>
              <p class="text-2xl font-bold text-blue-600 dark:text-blue-400" x-text="stats.global"></p>
            </div>
          </div>
          <span class="text-xs text-gray-500">Total</span>
        </div>
      </div>
    </div>

    <!-- Keys Table -->
    <div class="glass p-6 rounded-2xl">
      <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4">
        <div>
          <h3 class="text-xl font-semibold">Your Keys</h3>
          <p class="text-sm text-gray-600 dark:text-gray-400">View all of your keys</p>
        </div>
        <div class="mt-3 sm:mt-0">
          <input type="search" placeholder="Search..." class="px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-transparent text-sm focus:ring-2 focus:ring-indigo-500">
        </div>
      </div>

      <div class="overflow-x-auto">
        <table class="w-full text-sm">
          <thead>
            <tr class="text-left border-b border-white/20">
              <th class="pb-3">Key</th>
              <th class="pb-3">Macho</th>
              <th class="pb-3">Sold By</th>
              <th class="pb-3">Claimed</th>
              <th class="pb-3">Expires</th>
              <th class="pb-3">Plan</th>
              <th class="pb-3">Status</th>
            </tr>
          </thead>
          <tbody>
            <template x-for="key in keys" :key="key.id">
              <tr class="border-b border-white/10 hover:bg-white/5 dark:hover:bg-gray-800/50">
                <td class="py-3">
                  <a :href="'key.html?key=' + key.id" class="font-medium text-indigo-400 hover:underline" x-text="key.id"></a>
                </td>
                <td class="py-3" x-text="key.macho"></td>
                <td class="py-3">
                  <a :href="'reseller.html?id=' + key.reseller.id" class="hover:underline" x-text="key.reseller.name"></a>
                </td>
                <td class="py-3" x-text="key.claimed"></td>
                <td class="py-3" x-text="key.expires"></td>
                <td class="py-3" x-text="key.plan"></td>
                <td class="py-3">
                  <span :class="key.status === 'Active' ? 'badge-phoenix-success' : 'badge-phoenix-danger'" class="px-2 py-1 rounded-full text-xs font-medium">
                    <span x-text="key.status"></span>
                    <i :data-feather="key.status === 'Active' ? 'check' : 'x'" class="w-3 h-3 ml-1"></i>
                  </span>
                </td>
              </tr>
            </template>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</main>

<!-- Redeem Key Modal -->
<div x-show="openRedeemModal" class="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4" x-transition>
  <div class="glass p-6 rounded-2xl max-w-md w-full">
    <div class="flex items-center justify-between mb-4">
      <h3 class="text-xl font-semibold">Redeem Key</h3>
      <button @click="openRedeemModal = false">
        <i data-feather="x" class="w-5 h-5"></i>
      </button>
    </div>
    <input x-model="redeem.key" type="text" placeholder="Enter key" class="w-full px-4 py-2 rounded-lg bg-white/10 border border-white/20 text-white placeholder-white/50 mb-3">
    <input x-model="redeem.macho" type="text" placeholder="Macho auth" class="w-full px-4 py-2 rounded-lg bg-white/10 border border-white/20 text-white placeholder-white/50 mb-4">
    <div class="flex space-x-3">
      <button @click="redeemKey()" class="flex-1 py-2 bg-gradient-to-r from-indigo-500 to-purple-600 text-white rounded-lg hover:shadow-lg transition">
        Redeem
      </button>
      <button @click="openRedeemModal = false" class="flex-1 py-2 border border-gray-500 text-gray-300 rounded-lg hover:bg-gray-800/50 transition">
        Cancel
      </button>
    </div>
  </div>
</div>

<!-- Toast Container -->
<div class="fixed top-4 right-4 space-y-2 z-50" x-show="toasts.length">
  <template x-for="toast in toasts" :key="toast.id">
    <div x-show="toast.visible" x-transition:enter="transition ease-out duration-300" x-transition:enter-start="opacity-0 transform translate-y-2" x-transition:enter-end="opacity-100 transform translate-y-0" x-transition:leave="transition ease-in duration-200" x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0" class="glass p-4 rounded-lg shadow-lg flex items-center space-x-3 max-w-sm">
      <i :data-feather="toast.icon" class="w-6 h-6" :class="toast.color"></i>
      <p x-text="toast.message" class="flex-1"></p>
      <button @click="removeToast(toast.id)">
        <i data-feather="x" class="w-4 h-4"></i>
      </button>
    </div>
  </template>
</div>

<script>
  const firebaseConfig = {
    apiKey: "AIzaSyA9sJoZSzbmKJ-7F9jsYVmf7m4cMJ_JUuA",
    authDomain: "captcha-finder.firebaseapp.com",
    projectId: "captcha-finder",
    storageBucket: "captcha-finder.firebasestorage.app",
    messagingSenderId: "268327722037",
    appId: "1:268327722037:web:54ba44e1d4ccc2c734e57c"
  };
  firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();

  function dashboard() {
    return {
      collapsed: false,
      user: null,
      injectCode: `// CapTcha Inject Code\nconsole.log("Cap...");`,
      stats: { personal: 42, global: 1089 },
      keys: [
        { id: "ABC123", macho: "Macho#1234", reseller: { id: "r1", name: "John" }, claimed: "2025-11-01", expires: "2025-12-01", plan: "Premium", status: "Active" },
        { id: "XYZ789", macho: "Macho#5678", reseller: { id: "r2", name: "Alex" }, claimed: "2025-10-15", expires: "2025-11-15", plan: "Lifetime", status: "Expired" }
      ],
      openRedeemModal: false,
      redeem: { key: '', macho: '' },
      toasts: [],

      initAuth() {
        auth.onAuthStateChanged(user => {
          if (user) {
            this.user = user;
          } else {
            window.location.href = 'login.html';
          }
        });
      },

      copyInjectCode() {
        navigator.clipboard.writeText(this.injectCode);
        this.notify('success', 'Inject code copied!');
      },

      redeemKey() {
        if (!this.redeem.key || !this.redeem.macho) return this.notify('danger', 'Fill all fields');
        // Simulate API call
        setTimeout(() => {
          this.openRedeemModal = false;
          this.notify('success', 'Key redeemed successfully!');
          this.redeem = { key: '', macho: '' };
        }, 800);
      },

      logout() {
        auth.signOut().then(() => {
          window.location.href = 'index.html';
        });
      },

      notify(type, message) {
        const id = Date.now();
        const icons = { success: 'check-circle', info: 'info', warning: 'alert-triangle', danger: 'x-circle' };
        const colors = { success: 'text-green-400', info: 'text-blue-400', warning: 'text-yellow-400', danger: 'text-red-400' };
        this.toasts.push({ id, type, message, icon: icons[type], color: colors[type], visible: true });
        setTimeout(() => this.removeToast(id), 4000);
      },

      removeToast(id) {
        const toast = this.toasts.find(t => t.id === id);
        if (toast) toast.visible = false;
        setTimeout(() => {
          this.toasts = this.toasts.filter(t => t.id !== id);
        }, 300);
      }
    };
  }
</script>
</body>
</html>
